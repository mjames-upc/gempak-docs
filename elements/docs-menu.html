<!--
    @license
    Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
    This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
    The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
    The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
    Code distributed by Google as part of the polymer project is also
    subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../components/polymer/polymer.html">
<link rel="import" href="../components/core-menu/core-menu.html">
<link rel="import" href="../components/core-menu/core-submenu.html">
<link rel="import" href="../components/core-item/core-item.html">
<link rel="import" href="../components/core-icons/hardware-icons.html">

<polymer-element name="docs-menu" attributes="baseurl ajaxify coreElements paperElements" relative>
<template>
  <link rel="stylesheet" href="../css/elements/docs-menu.css">
  <core-menu id="mainmenu" on-click="{{onClick}}" selectedItem="{{item}}" fit>

    <core-item label="Download and Install" icon="file-download">
        <a href="{{ baseurl }}/docs/index.html"></a>
    </core-item>

    <core-submenu label="User Manual" icon="chevron-right">
      <core-item label="Introduction"><a href="{{ baseurl }}/docs/introduction.html"></a></core-item>
      <core-item label="Surface Data Programs"><a href="{{ baseurl }}/docs/surface_data_mapping.html"></a></core-item>
      <core-item label="Sounding Data Programs"><a href="{{ baseurl }}/docs/sounding_data_mapping.html"></a></core-item>
      <core-item label="GPMAP Overview"><a href="{{ baseurl }}/docs/gpmap_overview.html"></a></core-item>
      <core-item label="Maps and $MAPFIL"><a href="{{ baseurl }}/docs/map_aesthetics.html"></a></core-item>

      <core-submenu label="Gridded Data" icon="chevron-right">
        <core-item label="Gridded Data Mapping"><a href="{{ baseurl }}/docs/gridded_data_mapping.html"></a></core-item>
        <core-item label="Grid Diagnostics"><a href="{{ baseurl }}/docs/grid_diagnostics.html"></a></core-item>
        <core-item label="Grid Interpolation"><a href="{{ baseurl }}/docs/grid_interpolation_and_transformation.html"></a></core-item>
        <core-item label="Objective Analysis"><a href="{{ baseurl }}/docs/objective_analysis.html"></a></core-item>
      </core-submenu>


      <core-item label="Importing Data"><a href="{{ baseurl }}/docs/importing_data_into_gempak.html"></a></core-item>
      <core-item label="Vertical Plotting"><a href="{{ baseurl }}/docs/vertical_plotting.html"></a></core-item>
      <core-item label="Radar Programs"><a href="{{ baseurl }}/docs/radar_programs.html"></a></core-item>

    </core-submenu>

    <core-submenu label="Program List" icon="chevron-right">
      <core-item label="gddiag"><a href="{{ baseurl }}/programs/gddiag.html"></a></core-item>
      <core-item label="SF Programs"><a href="{{ baseurl }}/docs/program_index.html#sf-programs"></a></core-item>
      <core-item label="SN Programs"><a href="{{ baseurl }}/docs/program_index.html#sn-programs"></a></core-item>
      <core-item label="GD Programs"><a href="{{ baseurl }}/docs/program_index.html#gd-programs"></a></core-item>
      <core-item label="OA Programs"><a href="{{ baseurl }}/docs/program_index.html#oa-programs"></a></core-item>
      <core-item label="GP Programs"><a href="{{ baseurl }}/docs/program_index.html#gp-programs"></a></core-item>
      <core-item label="Decoders"><a href="{{ baseurl }}/docs/program_index.html#decoders"></a></core-item>
    </core-submenu>

    <core-submenu label="GEMPAK Data" icon="chevron-right">
      <core-item label="Gridded Models"><a href="{{ baseurl }}/docs/data/data-grids.html"></a></core-item>
      <core-item label="Satellite Imagery"><a href="{{ baseurl }}/docs/edex/data-satellite.html"></a></core-item>
      <core-item label="Radar Imagery"><a href="{{ baseurl }}/docs/edex/data-radar.html"></a></core-item>
      <core-item label="Surface Obs"><a href="{{ baseurl }}/docs/edex/data-obs.html"></a></core-item>
      <core-item label="Upper Air"><a href="{{ baseurl }}/docs/edex/data-uair.html"></a></core-item>
      <core-item label="Lightning"><a href="{{ baseurl }}/docs/edex/data-lightning.html"></a></core-item>
      <core-item label="Scatterometer"><a href="{{ baseurl }}/docs/edex/data-viirs.html"></a></core-item>
      <core-item label="Redbook Graphics"><a href="{{ baseurl }}/docs/edex/data-redbook.html"></a></core-item>
    </core-submenu>

    <core-submenu label="NMAP2 User Guide" icon="chevron-right">
      <core-item label="Introduction"><a href="{{ baseurl }}/docs/cave/d2d-intro.html"></a></core-item>
      <core-item label="System Menus"><a href="{{ baseurl }}/docs/cave/d2d-system-menus.html"></a></core-item>
      <!--
      <core-submenu label="System Menus">
        <core-item label="NCEP NCP"><a href="{{ baseurl }}/docs/cave/d2d-system-menus.html"></a></core-item>
      </core-submenu>
      -->
      <core-item label="Gridded Model Display"><a href="{{ baseurl }}/docs/cave/d2d-grids.html"></a></core-item>
      <core-item label="Surface Obs"><a href="{{ baseurl }}/docs/cave/d2d-obs.html"></a></core-item>
      <core-item label="Satellite"><a href="{{ baseurl }}/docs/cave/d2d-satellite.html"></a></core-item>
      <core-item label="Radar"><a href="{{ baseurl }}/docs/cave/d2d-radar.html"></a></core-item>
      <core-item label="Upper air"><a href="{{ baseurl }}/docs/cave/d2d-uair.html"></a></core-item>
      <core-item label="NCEP/Hydro"><a href="{{ baseurl }}/docs/cave/d2d-hydro.html"></a></core-item>
      <!--<core-item label="Lightning"><a href="{{ baseurl }}/docs/cave/d2d-lightning.html"></a></core-item>-->
      <!--<core-item label="Map Overlays"><a href="{{ baseurl }}/docs/cave/d2d-maps.html"></a></core-item>-->
      <core-item label="Display Tools"><a href="{{ baseurl }}/docs/cave/d2d-tools.html"></a></core-item>
      <core-item label="Radar Tools"><a href="{{ baseurl }}/docs/cave/d2d-radar-tools.html"></a></core-item>
      <!--<core-item label="Product Browser"><a href="{{ baseurl }}/docs/cave/product-browser.html"></a></core-item>-->
      <!--<core-item label="Localization Perspective"><a href="{{ baseurl }}/docs/cave/localization.html"></a></core-item>-->
      <!--<core-item label="Warngen"><a href="{{ baseurl }}/docs/cave/wa  rngen.html"></a></core-item>-->
      <core-item label="Editing D2D Menus"><a href="{{ baseurl }}/docs/cave/d2d-edit-menus.html"></a></core-item>
      <core-item label="Change Localization"><a href="{{ baseurl }}/docs/cave/cave-localization.html"></a></core-item>
    </core-submenu>


    <core-submenu label="Appendix" icon="list">

      <!-- <core-item label="NWS AWIPS II System Manager's Manual "><a href="{{ baseurl }}/docs/nws-smm.html"></a></core-item> -->
      <core-item label="Acronyms and abbreviations"><a href="{{ baseurl }}/docs/appendix-acronyms.html"></a></core-item>
      <core-item label="COTS and FOSS"><a href="{{ baseurl }}/docs/appendix-cots.html"></a></core-item>
      <core-item label="WSR-88D Products"><a href="{{ baseurl }}/docs/appendix-wsr88d.html"></a></core-item>
      <core-item label="Unused NWS components"><a href="{{ baseurl }}/docs/cave/unused-components.html"></a></core-item>
      <core-item label="Keyboard Shortcuts"><a href="{{ baseurl }}/docs/cave/cave-keyboard-shortcuts.html"></a></core-item>

    </core-submenu>

    <core-item label="on GitHub" icon="launch">
      <a href="https://github.com/Unidata/gempak" target="_blank"></a>
    </core-item>

    <core-item label="GEMPAK @ Unidata" icon="link">
      <a href="http://www.unidata.ucar.edu/software/gempak/" target="_blank"></a>
    </core-item>

  </core-menu>
</template>
<script>
  Polymer({
    ajaxify: true,
    isReady: false,
    coreElements: {},
    paperElements: {},
    created: function() {
      this.coreElementsList = [];
      this.paperElementsList = [];
    },
    domReady: function() {
      this.isReady = true;
      this.highlightItemWithCurrentURL();
    },
    coreElementsChanged: function() {
      for (var name in this.coreElements) {
        this.coreElementsList.push({name: name, url: this.coreElements[name]});
      }
    },
    paperElementsChanged: function() {
      for (var name in this.paperElements) {
        this.paperElementsList.push({name: name, url: this.paperElements[name]});
      }
    },
    highlightItemWithCurrentURL: function(opt_href) {
      var href = opt_href || location.pathname + location.hash;

      if (href.match(/core-elements.html$/)) {
        this.$.mainmenu.selected = this.$.mainmenu.items.indexOf(this.$.coreelements);
        return;
      } else if (href.match(/paper-elements.html$/)) {
        this.$.mainmenu.selected = this.$.mainmenu.items.indexOf(this.$.paperelements);
        return;
      }

      // If href wasn't found, look for a corresponding data-href. This is hacky
      // but the first querySelector will fail because the elements' urls are
      var item = this.shadowRoot.querySelector('[href$="' + href + '"]');
      if (!item) {
        item = this.shadowRoot.querySelector('[data-href$="' + href + '"]');
      }

      if (item) {
        var submenu = item.parentElement;

        // Selected item is not a submenu. Keep it selected and quit early.
        if (submenu == this.$.mainmenu) {
          return;
        }

        if (submenu.parentElement && submenu.parentElement.localName == 'core-submenu') {
          do {
            submenu.parentElement.selected = submenu.parentElement.items.indexOf(submenu);
            submenu = submenu.parentElement;
          } while (submenu && submenu.localName == 'core-submenu');
        } else {
          this.$.mainmenu.selected = this.$.mainmenu.items.indexOf(submenu);
        }
      }
    }
  });
</script>
</polymer-element>
